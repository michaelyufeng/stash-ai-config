# 📚 详细使用教程

## 🎯 目标读者

本教程适用于：
- 第一次使用 Stash 的用户
- 需要配置AI工具代理的用户
- 希望优化流媒体和游戏体验的用户

## 📱 前置准备

### 1. 安装 Stash 应用
- **iOS**: 从 App Store 搜索并下载 "Stash"
- **macOS**: 从 Mac App Store 或官网下载
- **Android**: 从官网或第三方应用市场下载

### 2. 获取机场服务
需要购买机场服务来获取代理节点：
- 选择知名度高、稳定性好的机场
- 确保支持 Clash/Stash 配置格式
- 建议选择有多个地区节点的服务

## 🚀 配置步骤

### 第一步：下载配置文件

#### 方法一：直接下载
```bash
# 克隆仓库
git clone https://github.com/your-username/stash-ai-config.git

# 进入目录
cd stash-ai-config
```

#### 方法二：直接下载单个文件
访问 GitHub 仓库，点击 `stash-config.yaml` 文件，然后点击 "Raw" 按钮，右键保存文件。

### 第二步：配置机场订阅

1. **获取订阅链接**
   - 登录你的机场面板
   - 找到 "订阅链接" 或 "Clash订阅" 选项
   - 复制订阅链接

2. **修改配置文件**
   打开 `stash-config.yaml` 文件，找到以下部分：
   ```yaml
   proxy-providers:
     机场订阅:
       type: http
       url: "请替换为你的机场订阅链接"
   ```

3. **替换订阅链接**
   将 `"请替换为你的机场订阅链接"` 替换为你的实际订阅链接：
   ```yaml
   url: "https://your-airport.com/api/v1/client/subscribe?token=your-token-here"
   ```

### 第三步：导入到 Stash

#### iOS 设备导入
1. 打开 Stash 应用
2. 点击右上角 "+" 按钮
3. 选择 "从文件导入"
4. 在文件选择器中找到并选择 `stash-config.yaml`
5. 确认导入

#### macOS 导入
1. 打开 Stash 应用
2. 菜单栏选择 "配置" → "导入配置"
3. 选择配置文件
4. 确认导入

#### 通过 URL 导入
如果你将配置文件上传到了网络上：
1. 复制配置文件的下载链接
2. 在 Stash 中选择 "从 URL 导入"
3. 粘贴链接并确认

### 第四步：启动和测试

1. **启动代理**
   - 在 Stash 主界面点击开关启动代理
   - 系统可能会请求网络权限，请允许

2. **选择代理模式**
   - 建议选择 "规则模式"
   - 这样可以自动根据域名选择是否使用代理

3. **测试连接**
   ```bash
   # 测试基本连接
   curl -I https://www.google.com
   
   # 测试AI服务
   curl -I https://chat.openai.com
   
   # 测试流媒体
   curl -I https://www.netflix.com
   ```

## 🎛️ 代理分组使用指南

### AI工具推荐节点
- **ChatGPT**: 美国、日本、新加坡节点
- **Google AI (Gemini)**: 仅美国节点
- **Claude**: 美国、英国、加拿大节点
- **Midjourney**: 美国、英国节点

### 流媒体推荐节点
- **Netflix**: 美国（内容最多）、日本（动漫）、英国
- **Disney+**: 美国、香港、日本
- **YouTube**: 任意海外节点
- **Spotify**: 美国、香港、日本

### 社交媒体推荐节点
- **TikTok**: 美国、日本、新加坡
- **Twitter/X**: 美国、日本、英国
- **Instagram**: 美国、香港、日本
- **Telegram**: 新加坡（推荐）、香港、日本

## 🔧 常见问题解决

### 问题1：配置导入失败
**可能原因**：
- 订阅链接错误或过期
- 网络连接问题
- 配置文件格式错误

**解决方法**：
1. 检查订阅链接是否正确
2. 尝试在浏览器中访问订阅链接
3. 联系机场客服确认订阅状态
4. 检查配置文件格式是否正确

### 问题2：某些网站无法访问
**可能原因**：
- 节点被封禁
- 规则配置问题
- DNS污染

**解决方法**：
1. 切换不同地区的节点
2. 尝试使用 "全局模式"
3. 检查DNS设置
4. 清除浏览器缓存

### 问题3：速度较慢
**可能原因**：
- 节点负载过高
- 路由优化问题

**解决方法**：
1. 使用 "♻️ 自动选择" 分组
2. 手动测试不同节点的速度
3. 避开高峰时段
4. 联系机场客服了解节点状态

### 问题4：AI服务被检测
**可能原因**：
- IP被AI服务商封禁
- 使用了数据中心IP

**解决方法**：
1. 切换到住宅IP节点
2. 使用不同地区的节点
3. 等待一段时间后重试
4. 联系机场提供专用IP

## 📊 性能优化建议

### 1. 节点选择优化
```yaml
# 在自动选择中增加容忍度
tolerance: 50  # 延迟差在50ms内的节点都可以使用
```

### 2. DNS优化
```yaml
# 使用更快的DNS服务器
nameserver:
  - https://doh.pub/dns-query
  - https://dns.alidns.com/dns-query
```

### 3. 规则更新
- 定期更新规则集以获得最佳性能
- 可以手动强制更新规则

## 🔄 配置更新流程

### 自动更新
配置支持规则集自动更新，每24小时更新一次。

### 手动更新
1. 下载最新版本的配置文件
2. 备份当前配置（特别是订阅链接）
3. 导入新配置
4. 重新填写订阅链接

### 增量更新
如果只是小幅调整：
1. 直接修改 Stash 中的配置
2. 在 "配置" → "编辑配置" 中进行修改
3. 保存后自动生效

## 💡 高级技巧

### 1. 自定义规则
```yaml
# 添加自定义规则
rules:
  - DOMAIN-SUFFIX,your-custom-domain.com,🇺🇸 美国节点
```

### 2. 脚本功能
Stash Pro 版本支持脚本功能，可以实现更复杂的自定义逻辑。

### 3. 多配置切换
可以创建多个配置文件用于不同场景：
- 工作配置（注重稳定性）
- 娱乐配置（注重流媒体）
- 开发配置（注重AI工具）

### 4. 网络测试
```bash
# 测试不同节点的延迟
for i in {1..10}; do
  curl -o /dev/null -s -w "%{time_total}\n" https://www.google.com
done
```

## 🛡️ 安全建议

### 1. 定期更新
- 定期更新 Stash 应用
- 定期更新配置文件
- 定期更换机场服务

### 2. 隐私保护
- 不要在公共场所使用机场服务
- 定期清理浏览器数据
- 使用私人浏览模式

### 3. 法律合规
- 遵守当地法律法规
- 不要用于非法用途
- 选择合法的机场服务商

## 📞 获取帮助

如果遇到问题，可以通过以下渠道获取帮助：
1. 查看本项目的 Issues
2. 提交新的 Issue
3. 参考 Stash 官方文档
4. 联系机场客服

---

希望这个教程能帮助你成功配置和使用 Stash！ 